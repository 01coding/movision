<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zhuhuibao.mybatis.memCenter.mapper.MemberMapper" >
  <resultMap id="BaseResultMap" type="com.zhuhuibao.mybatis.memCenter.entity.Member" >
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="mobile" property="mobile" jdbcType="VARCHAR" />
    <result column="email" property="email" jdbcType="VARCHAR" />
    <result column="emailCheckCode" property="emailCheckCode" jdbcType="VARCHAR" />
    <result column="password" property="password" jdbcType="VARCHAR" />
    <result column="registerTime" property="registerTime" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="identify" property="identify" jdbcType="INTEGER" />
    <result column="isValidatePass" property="isValidatePass" jdbcType="INTEGER" />
    <result column="enterpriseName" property="enterpriseName" jdbcType="VARCHAR" />
    <result column="employeeType" property="employeeType" jdbcType="INTEGER" />
    <result column="enterpriseEmployeeParentId" property="enterpriseEmployeeParentId" jdbcType="BIGINT" />
    <result column="companyIdentify" property="companyIdentify" jdbcType="INTEGER" />
    <result column="province" property="province" jdbcType="VARCHAR" />
    <result column="city" property="city" jdbcType="VARCHAR" />
    <result column="area" property="area" jdbcType="VARCHAR" />
    <result column="address" property="address" jdbcType="VARCHAR" />
    <result column="enterpriseType" property="enterpriseType" jdbcType="INTEGER" />
    <result column="enterpriseLogo" property="enterpriseLogo" jdbcType="VARCHAR" />
    <result column="enterpriseDesc" property="enterpriseDesc" jdbcType="VARCHAR" />
    <result column="headShot" property="headShot" jdbcType="VARCHAR" />
    <result column="saleProductDesc" property="saleProductDesc" jdbcType="VARCHAR" />
    <result column="enterpriseCreaterTime" property="enterpriseCreaterTime" jdbcType="VARCHAR" />
    <result column="registerCapital" property="registerCapital" jdbcType="VARCHAR" />
    <result column="employeeNumber" property="employeeNumber" jdbcType="VARCHAR" />
    <result column="companyBusinessLicenseImg" property="companyBusinessLicenseImg" jdbcType="VARCHAR" />
    <result column="enterpriseTelephone" property="enterpriseTelephone" jdbcType="INTEGER" />
    <result column="enterpriseFox" property="enterpriseFox" jdbcType="INTEGER" />
    <result column="enterpriseWebSite" property="enterpriseWebSite" jdbcType="VARCHAR" />
    <result column="enterpriseLinkman" property="enterpriseLinkman" jdbcType="VARCHAR" />
    <result column="enterpriseLMDep" property="enterpriseLMDep" jdbcType="VARCHAR" />
    <result column="fixedTelephone" property="fixedTelephone" jdbcType="INTEGER" />
    <result column="fixedMobile" property="fixedMobile" jdbcType="INTEGER" />
    <result column="QQ" property="QQ" jdbcType="INTEGER" />
    <result column="personRealName" property="personRealName" jdbcType="VARCHAR" />
    <result column="sex" property="sex" jdbcType="INTEGER" />
    <result column="personCompanyType" property="personCompanyType" jdbcType="INTEGER" />
    <result column="personPosition" property="personPosition" jdbcType="INTEGER" />
    <result column="personIdentifyCard" property="personIdentifyCard" jdbcType="INTEGER" />
    <result column="personIDFrontImgUrl" property="personIDFrontImgUrl" jdbcType="VARCHAR" />
    <result column="personIDBackImgUrl" property="personIDBackImgUrl" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    id, mobile, email, emailCheckCode, password, registerTime, status, identify, isValidatePass,
    enterpriseName, employeeType, enterpriseEmployeeParentId, companyIdentify, province,
    city, area, address, enterpriseType, enterpriseLogo, enterpriseDesc, headShot, saleProductDesc,
    enterpriseCreaterTime, registerCapital, employeeNumber, companyBusinessLicenseImg,
    enterpriseTelephone, enterpriseFox, enterpriseWebSite, enterpriseLinkman, enterpriseLMDep,
    fixedTelephone, fixedMobile, QQ, personRealName, sex, personCompanyType, personPosition,
    personIdentifyCard, personIDFrontImgUrl, personIDBackImgUrl
  </sql>
  <select id="findMemById" resultType="com.zhuhuibao.mybatis.memCenter.entity.Member">
    select
    <include refid="Base_Column_List" />
    from t_m_member
    where id = #{id}
  </select>
  <update id="updateMemInfo" parameterType="com.zhuhuibao.mybatis.memCenter.entity.Member">
    update t_m_member
    <set>
      <if test="mobile != null" >
        mobile = #{mobile,jdbcType=VARCHAR},
      </if>
      <if test="email != null" >
        email = #{email,jdbcType=VARCHAR},
      </if>
      <if test="emailCheckCode != null" >
        emailCheckCode = #{emailCheckCode,jdbcType=VARCHAR},
      </if>
      <if test="password != null" >
        password = #{password,jdbcType=VARCHAR},
      </if>
      <if test="registerTime != null" >
        registerTime = #{registerTime,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="identify != null" >
        identify = #{identify,jdbcType=INTEGER},
      </if>
      <if test="isValidatePass != null" >
        isValidatePass = #{isValidatePass,jdbcType=INTEGER},
      </if>
      <if test="enterpriseName != null" >
        enterpriseName = #{enterpriseName,jdbcType=VARCHAR},
      </if>
      <if test="employeeType != null" >
        employeeType = #{employeeType,jdbcType=INTEGER},
      </if>
      <if test="enterpriseEmployeeParentId != null" >
        enterpriseEmployeeParentId = #{enterpriseEmployeeParentId,jdbcType=BIGINT},
      </if>
      <if test="companyIdentify != null" >
        companyIdentify = #{companyIdentify,jdbcType=INTEGER},
      </if>
      <if test="province != null" >
        province = #{province,jdbcType=VARCHAR},
      </if>
      <if test="city != null" >
        city = #{city,jdbcType=VARCHAR},
      </if>
      <if test="area != null" >
        area = #{area,jdbcType=VARCHAR},
      </if>
      <if test="address != null" >
        address = #{address,jdbcType=VARCHAR},
      </if>
      <if test="enterpriseType != null" >
        enterpriseType = #{enterpriseType,jdbcType=INTEGER},
      </if>
      <if test="enterpriseLogo != null" >
        enterpriseLogo = #{enterpriseLogo,jdbcType=VARCHAR},
      </if>
      <if test="enterpriseDesc != null" >
        enterpriseDesc = #{enterpriseDesc,jdbcType=VARCHAR},
      </if>
      <if test="headShot != null" >
        headShot = #{headShot,jdbcType=VARCHAR},
      </if>
      <if test="saleProductDesc != null" >
        saleProductDesc = #{saleProductDesc,jdbcType=VARCHAR},
      </if>
      <if test="enterpriseCreaterTime != null" >
        enterpriseCreaterTime = #{enterpriseCreaterTime,jdbcType=VARCHAR},
      </if>
      <if test="registerCapital != null" >
        registerCapital = #{registerCapital,jdbcType=VARCHAR},
      </if>
      <if test="employeeNumber != null" >
        employeeNumber = #{employeeNumber,jdbcType=VARCHAR},
      </if>
      <if test="companyBusinessLicenseImg != null" >
        companyBusinessLicenseImg = #{companyBusinessLicenseImg,jdbcType=VARCHAR},
      </if>
      <if test="enterpriseTelephone != null" >
        enterpriseTelephone = #{enterpriseTelephone,jdbcType=INTEGER},
      </if>
      <if test="enterpriseFox != null" >
        enterpriseFox = #{enterpriseFox,jdbcType=INTEGER},
      </if>
      <if test="enterpriseWebSite != null" >
        enterpriseWebSite = #{enterpriseWebSite,jdbcType=VARCHAR},
      </if>
      <if test="enterpriseLinkman != null" >
        enterpriseLinkman = #{enterpriseLinkman,jdbcType=VARCHAR},
      </if>
      <if test="enterpriseLMDep != null" >
        enterpriseLMDep = #{enterpriseLMDep,jdbcType=VARCHAR},
      </if>
      <if test="fixedTelephone != null" >
        fixedTelephone = #{fixedTelephone,jdbcType=INTEGER},
      </if>
      <if test="fixedMobile != null" >
        fixedMobile = #{fixedMobile,jdbcType=INTEGER},
      </if>
      <if test="QQ != null" >
        QQ = #{QQ,jdbcType=INTEGER},
      </if>
      <if test="personRealName != null" >
        personRealName = #{personRealName,jdbcType=VARCHAR},
      </if>
      <if test="sex != null" >
        sex = #{sex,jdbcType=INTEGER},
      </if>
      <if test="personCompanyType != null" >
        personCompanyType = #{personCompanyType,jdbcType=INTEGER},
      </if>
      <if test="personPosition != null" >
        personPosition = #{personPosition,jdbcType=INTEGER},
      </if>
      <if test="personIdentifyCard != null" >
        personIdentifyCard = #{personIdentifyCard,jdbcType=INTEGER},
      </if>
      <if test="personIDFrontImgUrl != null" >
        personIDFrontImgUrl = #{personIDFrontImgUrl,jdbcType=VARCHAR},
      </if>
      <if test="personIDBackImgUrl != null" >
        personIDBackImgUrl = #{personIDBackImgUrl,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id}
  </update>
  <insert id="addMember" keyProperty="id" parameterType="com.zhuhuibao.mybatis.memCenter.entity.Member" useGeneratedKeys="true">
    insert into t_m_member(mobile,email,password,registerTime,status,identify,enterpriseEmployeeParentId,employeeType) values
    (#{mobile},#{email},#{password},date_format(now(),'%Y-%m-%d %H:%i:%s'),#{status},2,#{enterpriseEmployeeParentId},#{employeeType})
  </insert>
  <update id="updateMember" parameterType="com.zhuhuibao.mybatis.memCenter.entity.Member">
    update t_m_member
    <set>
      <if test="mobile != null">
        mobile = #{mobile},
      </if>
      <if test="email != null">
        email = #{email},
      </if>
      <if test="password != null">
        password = #{password},
      </if>
      <if test="employeeType != null">
        employeeType = #{employeeType},
      </if>
      <if test="personRealName != null">
        personRealName = #{personRealName},
      </if>
      <if test="status != null">
        status = #{status},
      </if>
    </set>
    where id = #{id}
  </update>
  <update id="disableMember" parameterType="com.zhuhuibao.mybatis.memCenter.entity.Member">
    update t_m_member
    <set>
      <if test="status!= null">
        status = 2,
      </if>
    </set>
    where 1=1
    <if test="mobile != null and mobile != '' ">
      and mobile = #{mobile}
    </if>
    <if test="email != null">
      and email = #{email}
    </if>
  </update>
  <update id="deleteMember" parameterType="com.zhuhuibao.mybatis.memCenter.entity.Member">
    update t_m_member
    <set>
      is_deleted = 1,
    </set>
    where 1=1
    <if test="mobile != null and mobile != '' ">
      and mobile = #{mobile}
    </if>
    <if test="email != null">
      and email = #{email}
    </if>
  </update>
  <select id="findStaffByParentId" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from t_m_member
    where
    enterpriseEmployeeParentId = #{enterpriseEmployeeParentId} and is_deleted = 0
    <if test="mobile != null and mobile != '' ">
      and mobile = #{mobile}
    </if>
    <if test="email != null">
      and email = #{email}
    </if>
  </select>
  <select id="findMem" parameterType="com.zhuhuibao.mybatis.memCenter.entity.Member" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from t_m_member
    where
    is_deleted = 0
    <if test="mobile != null and mobile != '' ">
      and mobile = #{mobile}
    </if>
    <if test="email != null">
      and email = #{email}
    </if>
  </select>
  <update id="resetPwd" parameterType="com.zhuhuibao.mybatis.memCenter.entity.Member">
    update t_m_member
    <set>
      password = #{password},
    </set>
    where 1=1
    <if test="mobile != null and mobile != '' ">
      and mobile = #{mobile}
    </if>
    <if test="email != null">
      and email = #{email}
    </if>
  </update>
</mapper>